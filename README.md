<h1 align="center">ckanext-scheming_dcat. LOD/INSPIRE metadata enhancement for ckanext-scheming</h1>
<p align="center">

<p align="center">
    <a href="#overview">Overview</a> •
    <a href="#installation">Installation</a> •
    <a href="#configuration">Configuration</a> •
    <a href="#running-the-tests">Running the Tests</a>
</p>

## Overview
This CKAN extension provides functions and templates specifically designed to extend `ckanext-scheming` and includes DCAT enhancements to adapt CKAN Schema to [GeoDCAT-AP](./ckanext/scheming_dcat/schemas/geodcatap/geodcatap_dataset.yaml).

>**Warning**:<br>
> Requires [mjanez/ckanext-dcat](https://github.com/mjanez/ckanext-dcat), [ckan/ckanext-scheming](https://github.com/ckan/ckanext-scheming) and [ckan/ckanext-spatial](https://github.com/ckan/ckanext-spatial) to work properly.
>
> It is **recommended to use with:** [`ckan-docker`](https://github.com/mjanez/ckan-docker) deployment or only use [`ckan-pycsw`](https://github.com/mjanez/ckan-pycsw) to deploy a CSW Catalog.


Enhancements:
- Could use schemas for `ckanext-scheming` in the plugin like [CKAN GeoDCAT-AP schema](ckanext/scheming_dcat/schemas/geodcatap/geodcatap_datasets.yaml)
- Improve the search functionality in CKAN for custom schemas. It uses the fields defined in a scheming file to provide a set of tools to use these fields for scheming, and a way to include icons in their labels when displaying them. More info: [`ckanext-scheming_dcat`](https://github.com/mjanez/ckanext-scheming_dcat_dcat)
- Add Metadata downloads for Linked Open Data formats ([`mjanez/ckanext-dcat`](https://github.com/mjanez/ckanext-dcat)) and Geospatial Metadata (ISO 19139, Dublin Core, etc. with [`mjanez/ckan-pycsw`](https://github.com/mjanez/ckanext-pycsw))
- Add i18n translations.
- Add a set of useful helpers and templates to be used with Metadata Schemas.


## Requirements
This plugin is compatible with CKAN 2.9 or later.


## Installation
```sh
cd $CKAN_VENV/src/

# Install latest stable release of:
## ckanext-scheming (e.g. release-3.0.0)
pip install -e git+https://github.com/ckan/ckanext-scheming.git@release-3.0.0#egg=ckanext-scheming

## mjanez/ckanext-dcat (e.g. 1.0.0-geodcatap)
pip install -e git+https://github.com/mjanez/ckanext-dcat.git@1.0.0-geodcatap#egg=ckanext-dcat
pip install -r https://raw.githubusercontent.com/mjanez/ckanext-dcat/master/requirements.txt

## ckanext-spatial (e.g. v.2.0.0)
pip install -e git++https://github.com/ckan/ckanext-spatial.git@v2.0.0#egg=ckanext-spatial
pip install -r https://raw.githubusercontent.com/ckan/ckanext-spatial/master/requirements.txt

# Install the scheming_dataset plugin
pip install -e "git+https://github.com/ckan/ckanext-scheming_dcat.git#egg=ckanext-scheming_dcat"
```

## Configuration
Set the plugin:

  ```ini
  # Add the plugin to the list of plugins
  ckan.plugins = ... spatial_metadata ... dcat ... scheming_dcat
  ```
>**Warning**<br>
> When using `scheming_dcat` extension,**`scheming` should not appear in the list of plugins loaded in CKAN.** But `dcat` and `spatial` should.

### Scheming
Set the schemas you want to use with configuration options:

  ```ini
  # Each of the plugins is optional depending on your use
  ckan.plugins = scheming_dcat_datasets scheming_dcat_groups scheming_dcat_organizations
  ```

To use custom schemas in `ckanext-scheming`:

  ```ini
  # module-path:file to schemas being used
  scheming.dataset_schemas = ckanext.scheming_dcat:schemas/geodcatap/geodcatap_dataset.yaml
  scheming.group_schemas = ckanext.scheming_dcat:schemas/geodcatap/geodcatap_group.json
  scheming.organization_schemas = ckanext.scheming_dcat:schemas/geodcatap/geodcatap_org.json

  #   URLs may also be used, e.g:
  #
  # scheming.dataset_schemas = http://example.com/spatialx_schema.yaml

  #   Preset files may be included as well. The default preset setting is:
  scheming.presets = ckanext.scheming_dcat:schemas/geodcatap/geodcatap_presets.json

  #   The is_fallback setting may be changed as well. Defaults to false:
  scheming.dataset_fallback = false
  ```

### Facet Scheming
To configure facets, there are no mandatory sets in the config file for this extension. The following sets can be used:

  ```ini
  scheming_dcat.facet_list: [list of fields]      # List of fields in scheming file to use to faceting. Use ckan defaults if not provided.
  scheming_dcat.default_facet_operator: [AND|OR]  # OR if not defined

   scheming_dcat.icons_dir: (dir)                  # images/icons if not defined
  ```

As an example for facet list, we could suggest:

  ```ini
  scheming_dcat.facet_list = "theme groups theme_es dcat_type owner_org res_format publisher_name publisher_type frequency tags tag_uri conforms_to spatial_uri"
  ```

The same custom fields for faceting can be used when browsing organizations and groups data:

  ```ini
  scheming_dcat.organization_custom_facets = true
  scheming_dcat.group_custom_facets = true
  ```

This two last settings are not mandatory. You can omit one or both (or set them to `false`), and the default fields for faceting will be used instead.

#### Facet Scheming integration with Solr
1. Clear the index in solr:

	`ckan -c [route to your .ini ckan config file] search-index clear`
   
2. Modify the schema file on Solr (schema or managed schema) to add the multivalued fields added in the scheming extension used for faceting. You can add any field defined in the schema file used in the ckanext-scheming extension that you want to use for faceting.
   You must define each field with these parameters:
   - `type: string` - to avoid split the text in tokens, each individually "faceted".
   - `uninvertible: false` - as recomended by solr´s documentation 
   - `docValues: true` - to ease recovering faceted resources
   - `indexed: true` - to let ckan recover resources under this facet 
   - `stored: true` - to let the value to be recovered by queries
   - `multiValued`: well... it depends on if it is a multivalued field (several values for one resource) or a regular field (just one value). Use "true" or "false" respectively. 
   
   E.g. [`ckanext-iepnb`](https://github.com/OpenDataGIS/ckanext-iepnb) extension are ready to use these multivalued fields. You have to add this configuration fragment to solr schema in order to use them:
	
    ```xml
    <!-- Extra fields -->
      <field name="tag_uri" type="string" uninvertible="false" docValues="true" indexed="true" stored="true" multiValued="true"/>
      <field name="conforms_to" type="string" uninvertible="false" docValues="true" indexed="true" stored="true" multiValued="true"/>
      <field name="lineage_source" type="string" uninvertible="false" docValues="true" indexed="true" stored="true" multiValued="true"/>
      <field name="lineage_process_steps" type="string" uninvertible="false" docValues="true" indexed="true" stored="true" multiValued="true"/>
      <field name="reference" type="string" uninvertible="false" docValues="true" indexed="true" stored="true" multiValued="true"/>
      <field name="theme" type="string" uninvertible="false" docValues="true" indexed="true" stored="true" multiValued="true"/>
      <field name="theme_es" type="string" uninvertible="false" docValues="true" multiValued="true" indexed="true" stored="true"/>
      <field name="metadata_profile" type="string" uninvertible="false" docValues="true" multiValued="true" indexed="true" stored="true"/>
      <field name="resource_relation" type="string" uninvertible="false" docValues="true" indexed="true" stored="true" multiValued="true"/>
    ```

    >**Note**<br>
    >You can ommit any field you're not going to use for faceting, but the best policy could be to add all values at the beginning. 
    >
    >The extra fields depend on your [schema](/ckanext/scheming_dcat/schemas/)
   	
	**Be sure to restart Solr after modify the schema.**
	
3. Restart CKAN. 
     
4. Reindex solr index:

	`ckan -c [route to your .ini ckan config file] search-index rebuild`

	Sometimes solr can issue an error while reindexing. In that case I'd try to restart solr, delete index ("search-index clear"), restart solr, rebuild index, and restart solr again.
	
	Ckan needs to "fix" multivalued fields to be able to recover values correctly for faceting, so this step must be done in order to use faceting with multivalued fields. 

### Icons
Icons for each field option in the [`scheming file`](ckanext/scheming_dcat/schemas/geodcatap/geodcatap_datasets.yaml) can be set in multiple ways:

- Set a root directory path for icons for each field using the `icons_dir` key in the scheming file.
- If `icons_dir` is not defined, the directory path is guessed starting from the value provided for the `scheming_dcat.icons_dir` parameter in the CKAN config file, adding the name of the field as an additional step to the path (`public/images/icons/{field_name`).
- For each option, use the `icon` setting to provide the last steps of the icon path from the field's root path defined before. This value may be just a file name or include a path to add to the icon's root directory.
- If `icon` is not used, a directory and file name are guessed from the option's value.
- Icons files are tested for existence when using `schemingdct_schema_icon` function to get them. If the file doesn't exist, the function returns `None`. Icons can be provided by any CKAN extension in its `public` directory.
- Set a `default icon` for a field using the default_icon setting in the scheming file. You can get it using `schemingdct_schema_get_default_icon` function, and it is your duty to decide when and where to get and use it in a template.


## Schemas
>**Note**<br>
> [`ckanext-scheming`](https://github.com/ckan/ckanext-scheming#common-schema-keys) common schema types.

With this plugin, you can customize the group, organization, and dataset entities in CKAN. Adding and enabling a schema will modify the forms used to update and create each entity, indicated by the respective `type` property at the root level. Such as `group_type`, `organization_type`, and `dataset_type`. Non-default types are supported properly as is indicated throughout the examples.

Are available to use with this extension a number of custom schema.

### GeoDCAT-AP (ES)
This is a [**custom schema**](/ckanext/scheming_dcat/schemas/geodcatap_es/geodcatap_es_dataset.yaml) with specific extensions for spatial data and [GeoDCAT-AP](https://github.com/SEMICeu/GeoDCAT-AP)/[INSPIRE](https://github.com/INSPIRE-MIF/technical-guidelines) metadata [profiles](https://en.wikipedia.org/wiki/Geospatial_metadata). 

>**Warning**
> * Custom extension, needs: [`mjanez/ckanext-dcat`](https://github.com/mjanez/ckanext-dcat)
> * Spanish context for some codelists and metadata properties (ES-Spain).

#### Datasets
| **DCAT Class** | **DCAT Property**             | **ckanext-scheming Section** | **ckanext-scheming Info**                                          | **GeoDCAT-AP**                                                                                                                                                                                          | **DCAT-AP**                                                                   | **INSPIRE metadata *ISO 19115 Core profile**                                                                          | **NTI-RISP**                      | **Codelists**                                                                                                                                                                     | **field_name**               | **multiplicity** |
|----------------|-------------------------------|------------------------------|--------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------|-----------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|------------------------------|------------------|
| dcat:Dataset   | dct:title                     | Basic Info                   | Dataset title (M)                                                  | 4.12.1 Mandatory properties for Dataset (M)                                                                                                                                                             | 4.4.1. Mandatory properties for Dataset - title (M)                           | Resource title (M) *Dataset title (M)                                                                                 | Nombre (M)                        | -                                                                                                                                                                                 | title                        | 1                |
| dcat:Dataset   | -                             | Basic Info                   | Dataset locator (O)                                                | B4.12.3 Optional properties for Dataset (O)                                                                                                                                                             | 4.4.3. Optional properties for Dataset - landing page (O)                     | -                                                                                                                     | Identificador (O)                 | -                                                                                                                                                                                 | name                         | 1                |
| dcat:Dataset   | dct:publisher                 | Basic Info                   | CKAN Organization (M)                                              | -                                                                                                                                                                                                       | -                                                                             | -                                                                                                                     | Organización CKAN (M)             | -                                                                                                                                                                                 | owner_org                    | 1                |
| dcat:Dataset   | -                             | Basic Info                   | Dataset privacy (M)                                                | -                                                                                                                                                                                                       | -                                                                             | -                                                                                                                     | -                                 | -                                                                                                                                                                                 | private                      | 1                |
| dcat:Dataset   | dct:description               | Basic Info                   | Dataset abstract (M)                                               | 4.12.1 Mandatory properties for Dataset (M)                                                                                                                                                             | 4.4.1. Mandatory properties for Dataset - description (M)                     | Resource abstract (M)*Abstract describing the dataset (M)                                                             | Descripción (M)                   | -                                                                                                                                                                                 | notes                        | 1.*              |
| dcat:Dataset   | dct:type                      | Basic Info                   | Dataset type (M)                                                   | B.6.3 Resource type (O)                                                                                                                                                                                 | 4.4.3. Optional properties for Dataset - type (O)                             | Resource type (M) *not in ISO19115                                                                                    | -                                 | https://inspire.ec.europa.eu/metadata-codelist/ResourceType,https://www.dublincore.org/specifications/dublin-core/dcmi-terms/#section-7,https://id.loc.gov/vocabulary/marcgt.html | dcat_type                    | 1                |
| dcat:Dataset   | dcat:theme                    | Basic Info                   | NTI-RISP Theme (M)                                                 | B.6.8 Topic category, originating controlled vocabulary, and keyword value - *Dataset topic category. (M)                                                                                               | 4.4.2. Recommended properties for Dataset - theme (R)                         | -                                                                                                                     | Temática(s) (M)                   | http://datos.gob.es/kos/sector-publico/sector                                                                                                                                     | theme_es                     | 1.*              |
| dcat:Dataset   | dct:identifier                | Basic Info                   | Metadata file identifier (M)                                       | B.6.17 Metadata file identifier (M)                                                                                                                                                                     | 4.4.3. Optional properties for Dataset - identifier (O)                       | Unique resource identifier (M) *not in ISO19115 core                                                                  | Identificador(O)                  | -                                                                                                                                                                                 | identifier                   | 1                |
| dcat:Dataset   | dct:language                  | Basic Info                   | Metadata file language (M)                                         | B.6.7 Resource language and metadata language - *Dataset language and Metadata language. (M)                                                                                                            | 4.4.3. Optional properties for Dataset - language(O)                          | Metadata language (M) * Metadata language (C)                                                                         | Idioma(s) (O)                     | https://publications.europa.eu/resource/authority/language                                                                                                                        | language                     | 1.*              |
| dcat:Dataset   | dct:issued                    | Basic Info                   | Date of publication (M)                                            | B.6.11 Temporal reference and metadata date –*Additional extent information for the dataset (vertical and temporal) and *Metadata date stamp. (C)                                                       | 4.4.3. Optional properties for Dataset - release date (O)                     | Date of publication (C) *Dataset reference date (M) – publication                                                     | -                                 | -                                                                                                                                                                                 | issued                       | 1                |
| dcta:Dataset   | dct:created                   | Basic Info                   | Date of creation (M)                                               | B.6.11 Temporal reference and metadata date –*Additional extent information for the dataset (vertical and temporal) and *Metadata date stamp. (C)                                                       | -                                                                             | Date of creation(C) *Dataset reference date (M) – creation                                                            | Fecha de creación (O)             | -                                                                                                                                                                                 | created                      | 1                |
| dcat:Dataset   | dct:modified                  | Basic Info                   | Date of last revision (M)                                          | B.6.11 Temporal reference and metadata date –*Additional extent information for the dataset (vertical and temporal) and *Metadata date stamp. (C)                                                       | 4.4.3. Optional properties for Dataset - update/modification date(O)          | Date of last revision (C) *Dataset reference date (M) – revision                                                      | Fecha de última actualización (O) | -                                                                                                                                                                                 | modified                     | 1                |
| dcat:Dataset   | dcat:keyword                  | Basic Info                   | Topics ISO19115 (M)                                                | B.6.8 Topic category, originating controlled vocabulary, and keyword value - *Dataset topic category. (M)                                                                                               | 4.4.2. Recommended properties for Dataset - keyword/ tag  (R)                 | Topic category (M) *Dataset topic category (M)                                                                        | -                                 | http://inspire.ec.europa.eu/metadata-codelist/TopicCategory                                                                                                                       | topic                        | 1                |
| dcat:Dataset   | dcat:keyword                  | Basic Info                   | Keyword value (R)                                                  | B.6.8 Topic category, originating controlled vocabulary, and keyword value - *Dataset topic category. (M)                                                                                               | 4.4.2. Recommended properties for Dataset - keyword/ tag  (R)                 | Keyword value (M) *not in ISO19115 core                                                                               | Etiqueta(s)(O)                    | https://inspire.ec.europa.eu/metadata-codelist/TopicCategory,http://inspire.ec.europa.eu/metadata-codelist/SpatialScope,https://www.eionet.europa.eu/gemet/en/alphabetic/         | tag_string                   | 1.*              |
| dcat:Dataset   | dcat:keyword                  | Basic Info                   | Keyword URI (R)                                                    | B.6.8 Topic category, originating controlled vocabulary, and keyword value - *Dataset topic category. (M)                                                                                               | 4.4.2. Recommended properties for Dataset - keyword/ tag  (R)                 | Keyword value (M) *not in ISO19115 core                                                                               | -                                 | https://inspire.ec.europa.eu/metadata-codelist/TopicCategory,http://inspire.ec.europa.eu/metadata-codelist/SpatialScope,https://www.eionet.europa.eu/gemet/en/alphabetic/         | tag_uri                      | 1.*              |
| vcard:Kind     | dcat:contactPoint             | Basic Info                   | Metadata point of contact name (R)                                 | B.6.16 Responsible party and metadata point of contact - *Dataset responsible party and *Metadata point of contact. (M)                                                                                 | 4.4.2. Recommended properties for Dataset - contact point (R)                 | Metadata point of contact - contactPoint (M) *Metadata point of contact (M)                                           | -                                 | -                                                                                                                                                                                 | contact_name                 | 1                |
| vcard:Kind     | dcat:contactPoint             | Basic Info                   | Metadata point of contact email (R)                                | B.6.16 Responsible party and metadata point of contact - *Dataset responsible party and *Metadata point of contact. (M)                                                                                 | 4.4.2. Recommended properties for Dataset - contact point (R)                 | Metadata point of contact - contactPoint (M) *Metadata point of contact (M)                                           | -                                 | -                                                                                                                                                                                 | contact_email                | 1                |
| vcard:Kind     | dcat:contactPoint             | Basic Info                   | Metadata point of contact URI (R)                                  | B.6.16 Responsible party and metadata point of contact - *Dataset responsible party and *Metadata point of contact. (M)                                                                                 | 4.4.2. Recommended properties for Dataset - contact point (R)                 | Metadata point of contact - contactPoint (M) *Metadata point of contact (M)                                           | -                                 | -                                                                                                                                                                                 | contact_uri                  | 0.1              |
| vcard:Kind     | dcat:contactPoint             | Basic Info                   | Metadata point of contact Web (R)                                  | B.6.16 Responsible party and metadata point of contact - *Dataset responsible party and *Metadata point of contact. (M)                                                                                 | 4.4.2. Recommended properties for Dataset - contact point (R)                 | Metadata point of contact - contactPoint (M) *Metadata point of contact (M)                                           | -                                 | -                                                                                                                                                                                 | contact_url                  | 0.1              |
| foaf:Agent     | dct:publisher                 | Responsible Party            | Publisher name (M)                                                 | B.6.16 Responsible party and metadata point of contact - *Dataset responsible party and *Metadata point of contact. (M)                                                                                 | 4.4.2. Recommended properties for Dataset - publisher (R)                     | Responsible party - distributor(M) *Dataset responsible party (O)                                                     | -                                 | -                                                                                                                                                                                 | publisher_name               | 1                |
| dcat:Dataset   | dct:publisher                 | Responsible Party            | Publisher identifier (M)                                           | B.6.16 Responsible party and metadata point of contact - *Dataset responsible party and *Metadata point of contact. (M)                                                                                 | 4.4.2. Recommended properties for Dataset - publisher (R)                     | Responsible party - distributor(M) *Dataset responsible party (O)                                                     | Publicador(M)                     | -                                                                                                                                                                                 | publisher_identifier         | 1                |
| dcat:Dataset   | dct:publisher                 | Responsible Party            | Publisher URI (M)                                                  | B.6.16 Responsible party and metadata point of contact - *Dataset responsible party and *Metadata point of contact. (M)                                                                                 | 4.4.2. Recommended properties for Dataset - publisher (R)                     | Responsible party - distributor(M)  *Dataset responsible party (O)                                                    | Publicador(M)                     | -                                                                                                                                                                                 | publisher_uri                | 1                |
| foaf:Agent     | dct:publisher                 | Responsible Party            | Publisher email (M)                                                | B.6.16 Responsible party and metadata point of contact - *Dataset responsible party and *Metadata point of contact. (M)                                                                                 | 4.4.2. Recommended properties for Dataset - publisher (R)                     | Responsible party - distributor(M) *Dataset responsible party (O)                                                     | -                                 | -                                                                                                                                                                                 | publisher_email              | 1                |
| foaf:Agent     | dct:publisher                 | Responsible Party            | Publisher URL (R)                                                  | B.6.16 Responsible party and metadata point of contact - *Dataset responsible party and *Metadata point of contact. (M)                                                                                 | 4.4.2. Recommended properties for Dataset - publisher (R)                     | Responsible party - distributor(M)  *Dataset responsible party (O)                                                    | -                                 | -                                                                                                                                                                                 | publisher_url                | 0.1              |
| foaf:Agent     | dct:publisher                 | Responsible Party            | Publisher type (M)                                                 | B.6.16 Responsible party and metadata point of contact - *Dataset responsible party and *Metadata point of contact. (M)                                                                                 | 4.4.2. Recommended properties for Dataset - publisher (R)                     | Responsible party - distributor(M) *Dataset responsible party (O)                                                     | -                                 | http://purl.org/adms/publishertype/                                                                                                                                               | publisher_type               | 1                |
| vcard:Kind     | dcat:contactPoint             | Responsible Party            | Maintainer name (R)                                                | B.6.16 Responsible party and metadata point of contact - *Dataset responsible party and *Metadata point of contact. (M)                                                                                 | 4.4.2. Recommended properties for Dataset - contact point (R)                 | Responsible party - custodian (M) *Dataset responsible party (O)                                                      | -                                 | -                                                                                                                                                                                 | maintainer_name              | 0.1              |
| vcard:Kind     | dcat:contactPoint             | Responsible Party            | Maintainer Identifier (R)                                          | B.6.16 Responsible party and metadata point of contact - *Dataset responsible party and *Metadata point of contact. (M)                                                                                 | 4.4.2. Recommended properties for Dataset - contact point (R)                 | Responsible party - custodian (M) *Dataset responsible party (O)                                                      | -                                 | -                                                                                                                                                                                 | maintainer_uri               | 0.1              |
| vcard:Kind     | dcat:contactPoint             | Responsible Party            | Maintainer email (R)                                               | B.6.16 Responsible party and metadata point of contact - *Dataset responsible party and *Metadata point of contact. (M)                                                                                 | 4.4.2. Recommended properties for Dataset - contact point (R)                 | Responsible party - custodian (M) *Dataset responsible party (O)                                                      | -                                 | -                                                                                                                                                                                 | maintainer_email             | 0.1              |
| vcard:Kind     | dcat:contactPoint             | Responsible Party            | Maintainer web (R)                                                 | B.6.16 Responsible party and metadata point of contact - *Dataset responsible party and *Metadata point of contact. (M)                                                                                 | 4.4.2. Recommended properties for Dataset - contact point (R)                 | Responsible party - custodian (M) *Dataset responsible party (O)                                                      | -                                 | -                                                                                                                                                                                 | maintainer_url               | 0.1              |
| vcard:Kind     | dct:creator                   | Responsible Party            | Author name (O)                                                    | B.6.16 Responsible party and metadata point of contact - *Dataset responsible party and *Metadata point of contact. (M)                                                                                 | 4.4.3. Optional properties for Dataset - creator (O)                          | Responsible party - custodian (M) *Dataset responsible party (O)                                                      | -                                 | -                                                                                                                                                                                 | author_name                  | 0.1              |
| vcard:Kind     | dct:creator                   | Responsible Party            | Author Identifier (O)                                              | B.6.16 Responsible party and metadata point of contact - *Dataset responsible party and *Metadata point of contact. (M)                                                                                 | 4.4.3. Optional properties for Dataset - creator (O)                          | Responsible party - author (M) *Dataset responsible party (O)                                                         | -                                 | -                                                                                                                                                                                 | author_uri                   | 0.1              |
| vcard:Kind     | dct:creator                   | Responsible Party            | Author email (O)                                                   | B.6.16 Responsible party and metadata point of contact - *Dataset responsible party and *Metadata point of contact. (M)                                                                                 | 4.4.3. Optional properties for Dataset - creator (O)                          | Responsible party - author (M) *Dataset responsible party (O)                                                         | -                                 | -                                                                                                                                                                                 | author_mail                  | 0.1              |
| vcard:Kind     | dct:creator                   | Responsible Party            | Author web (O)                                                     | B.6.16 Responsible party and metadata point of contact - *Dataset responsible party and *Metadata point of contact. (M)                                                                                 | 4.4.3. Optional properties for Dataset - creator (O)                          | Responsible party - author (M) *Dataset responsible party (O)                                                         | -                                 | -                                                                                                                                                                                 | author_url                   | 0.1              |
| dcat:Dataset   | adms:Identifier               | Quality                      | Other identifier (O)                                               | B4.12.3 Optional properties for Dataset (O)                                                                                                                                                             | 7. Dereferenceable identifiers (O)                                            | -                                                                                                                     | -                                 | -                                                                                                                                                                                 | alternate_identifier         | 0.1              |
| dcat:Dataset   | dct:provenance                | Quality                      | Lineage statement (M)                                              | B.6.12 Lineage - *Lineage. (M)                                                                                                                                                                          | 4.4.3. Optional properties for Dataset - provenance (O)                       | Lineage (M) *Lineage (O)                                                                                              | -                                 | -                                                                                                                                                                                 | provenance                   | 1                |
| dcat:Dataset   | dct:conformsTo                | Quality                      | Conformity (M)                                                     | B.6.14 Conformity and data quality (M)                                                                                                                                                                  | 4.4.3. Optional properties for Dataset - conforms to (O)                      | Conformity (M) *not in ISO19115 core                                                                                  | Normativa (O)                     | -                                                                                                                                                                                 | conforms_to                  | 1.*              |
| dcat:Dataset   | dct:conformsTo                | Quality                      | Metadata standard (M)                                              | B.6.18 *Metadata standard name, *Metadata standard version. This can be part of the information specified for metadata standard name. (O)                                                               | -                                                                             | *Metadata standard version (O)                                                                                        | Normativa (O)                     | -                                                                                                                                                                                 | metadata_profile             | 1.*              |
| dcat:Dataset   | dct:temporal                  | Quality                      | Temporal start (R)                                                 | B.6.11 Temporal reference and metadata date –*Additional extent information for the dataset (vertical and temporal) and *Metadata date stamp. (C)                                                       | 4.4.2. Recommended properties for Dataset - temporal coverage (R)             | Temporal extent (C) *Additional extent information for the dataset (vertical and temporal) (O)                        | Cobertura temporal (O)            | -                                                                                                                                                                                 | temporal_start               | 0.1              |
| dcat:Dataset   | dct:temporal                  | Quality                      | Temporal end (R)                                                   | B.6.11 Temporal reference and metadata date –*Additional extent information for the dataset (vertical and temporal) and *Metadata date stamp. (C)                                                       | 4.4.2. Recommended properties for Dataset - temporal coverage (R)             | Temporal extent (C) *Additional extent information for the dataset (vertical and temporal) (O)                        | Cobertura temporal (O)            | -                                                                                                                                                                                 | temporal_end                 | 0.1              |
| dcat:Dataset   | dct:accrualPeriodicity        | Quality                      | Update frequency (O)                                               | B.6.27 Maintenance information - *not in ISO 19115 core (O)                                                                                                                                             | 4.4.3. Optional properties for Dataset - frequency (O)                        | -                                                                                                                     | Frecuencia de actualización (O)   | http://publications.europa.eu/resource/authority/frequency                                                                                                                        | frequency                    | 0.1              |
| dcat:Dataset   | dct:source                    | Quality                      | Source dataset (C)                                                 | B.6.12 Lineage - *Lineage. (M)                                                                                                                                                                          | 4.4.3. Optional properties for Dataset - source (O)                           | Coupled resource (C)                                                                                                  | -                                 | -                                                                                                                                                                                 | source                       | 0.*              |
| dcat:Dataset   | dct:source                    | Quality                      | Lineage sources (O)                                                | B.6.12 Lineage - *Lineage. (M)                                                                                                                                                                          | -                                                                             | Lineage (M) *Lineage (O)                                                                                              | -                                 | -                                                                                                                                                                                 | lineage_source               | 1.*              |
| dcat:Dataset   | ?                             | Quality                      | Lineage process steps (M)                                          | B.6.12 Lineage - *Lineage. (M)                                                                                                                                                                          | -                                                                             | Lineage (C) *Lineage (O)                                                                                              | -                                 | -                                                                                                                                                                                 | lineage_process_steps        | 1.*              |
| dcat:Dataset   | dct:relation                  | Quality                      | Related resources (O)                                              | B4.12.3 Optional properties for Dataset (O)                                                                                                                                                             | 4.4.3. Optional properties for Dataset - related resource (O)                 | -                                                                                                                     | Recurso(s) relacionado(s) (O)     | -                                                                                                                                                                                 | reference                    | 0.*              |
| dcat:Dataset   | cnt:characterEncoding         | Quality                      | Character encoding (C)                                             | B.6.24 Character encoding - *Dataset character set and *Metadata character set (C)                                                                                                                      | -                                                                             | *Metadata character set (C)                                                                                           | -                                 | https://www.iana.org/assignments/character-sets/character-sets.xhtml                                                                                                              | encoding                     | 0.1              |
| dcat:Dataset   | dcat:temporalResolution       | Quality                      | Temporal resolution (O)                                            | B4.12.3 Optional properties for Dataset (O)                                                                                                                                                             | 4.4.3. Optional properties for Dataset - temporal resolution (O)              | -                                                                                                                     | -                                 | -                                                                                                                                                                                 | temporal_resolution          | 0.1              |
| dcat:Dataset   | -                             | Spatial                      | -                                                                  | B.6.8 Topic category, originating controlled vocabulary, and keyword value - *Dataset topic category. (M)                                                                                               | 4.4.2. Recommended properties for Dataset - theme (R)                         | Keyword value (M) *not in ISO19115 core                                                                               | -                                 | https://inspire.ec.europa.eu/theme                                                                                                                                                | theme                        | 1.*              |
| dcat:Dataset   | adms:identifier               | Spatial                      | -                                                                  | 5.2.6 Identifier (O)                                                                                                                                                                                    | 4.4.3. Optional properties for Dataset - other identifier (O)                 | -                                                                                                                     | -                                 | -                                                                                                                                                                                 | inspire_id                   | 1                |
| dcat:Dataset   | dct:conformsTo                | Spatial                      | -                                                                  | B..6.23 Coordinate reference systems and Temporal reference systems – *Reference System (M)                                                                                                             | -                                                                             | Coordinate Reference System (M) *Reference System (O)                                                                 | Normativa (O)                     | https://www.opengis.net/def/crs/EPSG/0                                                                                                                                            | reference_system             | 1                |
| dcat:Dataset   | dct:spatial                   | Spatial                      | Geographic bounding box (R)                                        | B.6.10 Geographic bounding box - *Geographic location of the dataset (by 4 coordinates or by geographic identifier) on the preferred format to be used in RDF for the representation of geometries. (M) | 4.4.2. Recommended properties for Dataset - spatial/geographical coverage (R) | Geographic bounding box (M) *Geographic location of the dataset (by four coordinates or by geographic identifier) (C) | -                                 | -                                                                                                                                                                                 | spatial                      | 1                |
| dcat:Dataset   | dct:spatial                   | Spatial                      | Geographic identifier (R)                                          | B.6.10 Geographic bounding box - *Geographic location of the dataset (by 4 coordinates or by geographic identifier) on the preferred format to be used in RDF for the representation of geometries. (M) | 4.4.2. Recommended properties for Dataset - spatial/geographical coverage (R) | -                                                                                                                     | Cobertura geográfica (O)          | http://datos.gob.es/recurso/sector-publico/territorio                                                                                                                             | spatial_uri                  | 0.1              |
| dcat:Dataset   | adms:representationTechnique  | Spatial                      | -                                                                  | B.6.26 Spatial representation type – *Spatial representation type (R)                                                                                                                                   | -                                                                             | Spatial representation type – (M) *Spatial representation type (O)                                                    | -                                 | http://inspire.ec.europa.eu/metadata-codelist/SpatialRepresentationType                                                                                                           | representation_type          | 0.1              |
| dcat:Dataset   | dcat:spatialResolutionInMeter | Spatial                      | -                                                                  | B.6.13 Spatial resolution – Spatial resolution of the dataset (C)                                                                                                                                       | 4.4.3. Optional properties for Dataset - spatial resolution  (O)              | Spatial resolution © *Spatial resolution of the dataset (O)                                                           | -                                 | -                                                                                                                                                                                 | spatial_resolution_in_meters | 0.1              |
| dcat:Dataset   | dct:license                   | License                      | License URI (M)                                                    | B.6.15 Conditions for access and use and limitations on public access – Use limitation and access / other constraints. (M)                                                                              | -                                                                             | Conditions for access and use (M)  *not in ISO19115 core                                                              | Condiciones de uso (M)            | https://iepnb.es/catalogo/api/3/action/license_list                                                                                                                               | license_id                   | 1                |
| dcat:Dataset   | dct:accessRights              | License                      | Conditions for access and use and limitations on public access (M) | B.6.15 Conditions for access and use and limitations on public access – Use limitation and access / other constraints. (M)                                                                              | 4.4.3. Optional properties for Dataset - creator (O)                          | Limitations on public access (M) *not in ISO19115 core                                                                | -                                 | https://inspire.ec.europa.eu/metadata-codelist/LimitationsOnPublicAccess                                                                                                          | access_rights                | 1                |
| dcat:Dataset   | owl:versionInfo               | License                      | Version number (O)                                                 | B4.12.3 Optional properties for Dataset (O)                                                                                                                                                             | 4.4.3. Optional properties for Dataset - version (O)                          | -                                                                                                                     | -                                 | -                                                                                                                                                                                 | version                      | 0.1              |
| dcat:Dataset   | adms:versionNotes             | License                      | Version information (O)                                            | B4.12.3 Optional properties for Dataset (O)                                                                                                                                                             | 4.4.3. Optional properties for Dataset - version notes (O)                    | -                                                                                                                     | -                                 | -                                                                                                                                                                                 | version_notes                | 0.1              |
| dcat:Dataset   | dtc:valid                     | License                      | Dataset validity (O)                                               | -                                                                                                                                                                                                       | -                                                                             | -                                                                                                                     | Vigencia del recurso (O)          | -                                                                                                                                                                                 | valid                        | 0.1              |
| dcat:Dataset   | -                     | -                      | Dataset groups (O)                                               | -                                                                                                                                                                                                       | -                                                                             | -                                                                                                                     | -          | -                                                                                                                                                                                 | groups                        | 0.*              |
| dcat:Dataset   | dcat:distribution             | License                      | Resources (R)                                                      | 4.13 Distribution (O)                                                                                                                                                                                   | 4.4.2. Recommended properties for Dataset - dataset distribution (R)          | Resource (O) *Resource (O)                                                                                            | Distribución(es) (O)              | -                                                                                                                                                                                 | resources{}                  | 1.*              |


#### Distributions
| **DCAT Class**    | **DCAT Property**     | **ckanext-scheming Section** | **ckanext-scheming Info**                 | **GeoDCAT-AP**                                                                                                             | **DCAT-AP**                                                                  | **INSPIRE metadata *ISO 19115 Core profile**               | **NTI-RISP**                            | **Codelists**                                                            | **field_name**        | **multiplicity** |
|-------------------|-----------------------|------------------------------|-------------------------------------------|----------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------|------------------------------------------------------------|-----------------------------------------|--------------------------------------------------------------------------|-----------------------|------------------|
| dcat:Distribution | dcat:accessURL        | Resource                     | Access URL (M)                            | 4.13.1 Mandatory properties for Distribution (M)                                                                           | 4.5.1. Mandatory properties for Distribution - access URL (M)                | On-line resource (O)                                       | URL de acceso (M)                       | -                                                                        | url                   | 0.1              |
| dcat:Distribution | dct:title             | Resource                     | Resource title (M)                        | 4.13.3 Optional properties for Distribution (O)                                                                            | "4.5.3. Optional properties for Distribution - title (O)"                    | Resource title (M) *Dataset title (M)                      | Nombre (M)                              | -                                                                        | name                  | 1.*              |
| dcat:Distribution | dct:description       | Resource                     | Resource abstract (M)                     | 4.12.1 Mandatory properties for Dataset (M)                                                                                | 4.4.2. Recommended properties for Distribution - description (R)             | Resource abstract (M) *Abstract describing the dataset (M) | -                                       | -                                                                        | description           | 1                |
| dcat:Distribution | dct:issued            | Resource                     | Date of publication (M)                   | 4.13.3 Optional properties for Distribution (O)                                                                            | "4.5.3. Optional properties for Distribution - release date (O)"             | -                                                          | -                                       | -                                                                        | {issued}              | 0.1              |
| dcat:Distribution | dct:created           | Resource                     | Date of creation (M)                      | 4.13.3 Optional properties for Distribution (O)                                                                            | -                                                                            | -                                                          | -                                       | -                                                                        | created               | 0.1              |
| dcat:Distribution | dct:modified          | Resource                     | Date of last revision (M)                 | 4.13.3 Optional properties for Distribution (O)                                                                            | "4.5.3. Optional properties for Distribution - update/modification date (O)" | -                                                          | -                                       | -                                                                        | modified              | 0.1              |
| dcat:Distribution | dcatap:availability   | Resource                     | Distribution availability (R)             | 4.13.2 Recommended properties for Distribution (R)                                                                         | 4.4.2. Recommended properties for Distribution - availability (R)            | -                                                          | -                                       | https://publications.europa.eu/resource/authority/planned-availability   | availability          | 0.1              |
| dcat:Distribution | dct:identifier        | Resource                     | Resource URI (M)                          | B.6.17 Metadata file identifier (M)                                                                                        | -                                                                            | Unique resource identifier (M)  *not in ISO19115 core      | Identificador (O)                       | -                                                                        | {uri}                 | 1                |
| dcat:Distribution | dct:format            | Resource                     | Resource format (O)                       | 4.13.2 Recommended properties for Distribution (R)                                                                         | 4.4.2. Recommended properties for Distribution - format (R)                  | Distribution format (O)                                    | Formato (M)                             | https://publications.europa.eu/resource/authority/file-type              | format                | 0.1              |
| dcat:Distribution | dct:MediaType         | Resource                     | Media type (O)                            | 4.13.2 Recommended properties for Distribution (R)                                                                         | "4.5.3. Optional properties for Distribution - media type (O)"               | -                                                          | -                                       | https://www.iana.org/assignments/media-types/media-types.xhtml           | mimetype              | 0.1              |
| dcat:Distribution | adms:status           | Resource                     | Resource status (R)                       | 4.13.3 Optional properties for Distribution (O)                                                                            | "4.5.3. Optional properties for Distribution - status (O)"                   | -                                                          | -                                       | http://purl.org/adms/status/                                             | status                | 0.1              |
| dcat:Distribution | cnt:characterEncoding | Resource                     | Character encoding (M)                    | B.6.24 Character encoding - *Dataset character set and *Metadata character set (C)                                         | -                                                                            | *Metadata character set (C)                                | -                                       | -                                                                        | encoding              |                  |
| dcat:Distribution | dct:language          | Resource                     | Resource language (M)                     | B.6.7 Resource language and metadata language - *Dataset language and Metadata language. (M)                               | "4.5.3. Optional properties for Distribution - language (O)"                 | -                                                          | Idioma(s) (O)                           | https://publications.europa.eu/resource/authority/language               | language              | 1.*              |
| dcat:Distribution | dcat:byteSize         | Resource                     | Byte size (O)                             | 4.13.3 Optional properties for Distribution (O)                                                                            | "4.5.3. Optional properties for Distribution - byte size (O)"                | -                                                          | Tamaño (O)                              | -                                                                        | size                  | 0.1              |
| dcat:Distribution | dct:relation          | Resource                     | Additional format information (O)         | 4.13.3 Optional properties for Distribution (O)                                                                            | -                                                                            | -                                                          | Información adicional sobre formato (O) | -                                                                        | resource_relation     | 0.*              |
| dcat:Distribution | dct:license           | Resource                     | Resource License (R)                      | 4.13.2 Recommended properties for Distribution (R)                                                                         | 4.4.2. Recommended properties for Distribution - license (R)                 | -                                                          | -                                       | https://iepnb.es/catalogo/api/3/action/license_list                      | license               | 0.1              |
| dcat:Distribution | dct:rights            | Resource                     | Resource limitations on public access (M) | B.6.15 Conditions for access and use and limitations on public access – Use limitation and access / other constraints. (M) | "4.5.3. Optional properties for Distribution - rights (O)"                   | Limitations on public access (C)                           | -                                       | https://inspire.ec.europa.eu/metadata-codelist/LimitationsOnPublicAccess | rights                | 1                |
| dcat:Distribution | dct:conformsTo        | Resource                     | Conformity (M)                            | B.6.14 Conformity and data quality (M)                                                                                     | -                                                                            | Conformity (M) *not in ISO19115 core                       | -                                       | -                                                                        | conforms_to           | 1                |
| dcat:Distribution | dct:conformsTo        | Resource                     | -                                         | B..6.23 Coordinate reference systems and Temporal reference systems – *Reference System (M)                                | -                                                                            | Coordinate Reference System (M) *Reference System (O)      | -                                       | https://www.opengis.net/def/crs/EPSG/0                                   | epsg                  | 0.1              |
| dcat:Distribution | dct:provenance        | Resource                     | Lineage statement (O)                     | -                                                                                                                          | -                                                                            | -                                                          | -                                       | -                                                                        | provenance            | 0.1              |
| dcat:Distribution | ?                     | Resource                     | Lineage process steps (O)                 | -                                                                                                                          | -                                                                            | -                                                          | -                                       | -                                                                        | lineage_process_steps | 0.*              |

### TODO: DCAT 
[`schemas/dcat`](/ckanext/scheming_dcat/schemas/dcat/dcat_dataset.yaml) based
on: [DCAT](https://www.w3.org/TR/vocab-dcat-3/).

### TODO: DCAT-AP (EU)
[`schemas/dcatap`](/ckanext/scheming_dcat/schemas/dcatap/dcatap_dataset.yaml) based on: [DCAT-AP](https://op.europa.eu/en/web/eu-vocabularies/dcat-ap) for the european context.

### TODO: GeoDCAT-AP (EU)
[`schemas/geodcatap`](/ckanext/scheming_dcat/schemas/geodcatap/geodcatap_dataset.yaml) based on: [GeoDCAT-AP](https://github.com/SEMICeu/GeoDCAT-AP) for the european context.

## Running the Tests
To run the tests:

    pytest --ckan-ini=test.ini ckanext/scheming_dcat/tests
